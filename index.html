<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipedrive CRM Form</title>
</head>
<body>
    <h2>Fill out the form</h2>
    <form id="pipedriveForm">
        <h3>Client Details</h3>
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" required>
        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" required>
        <label for="phone">Phone:</label>
        <input type="tel" id="phone" required>
        <label for="email">Email:</label>
        <input type="email" id="email">
        
        <h3>Job Details</h3>
        <label for="jobType">Job Type:</label>
        <input type="text" id="jobType" required>
        <label for="jobSource">Job Source:</label>
        <input type="text" id="jobSource" required>
        <label for="jobDescription">Job Description:</label>
        <textarea id="jobDescription"></textarea>
        
        <h3>Service Location</h3>
        <label for="address">Address:</label>
        <input type="text" id="address" required>
        <label for="city">City:</label>
        <input type="text" id="city" required>
        <label for="state">State:</label>
        <input type="text" id="state" required>
        <label for="zip">Zip Code:</label>
        <input type="text" id="zip" required>
        <label for="area">Area:</label>
        <input type="text" id="area" required>
        
        <h3>Scheduled</h3>
        <label for="startDate">Start Date:</label>
        <input type="date" id="startDate" required>
        <label for="startTime">Start Time:</label>
        <input type="time" id="startTime" required>
        <label for="endTime">End Time:</label>
        <input type="time" id="endTime" required>
        <label for="testSelect">Test Select:</label>
        <select id="testSelect" required>
            <option value="Option 1">Option 1</option>
            <option value="Option 2">Option 2</option>
            <option value="Option 3">Option 3</option>
        </select>
        
        <button type="submit">Submit</button>
    </form>

    <script>
        document.getElementById("pipedriveForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent default form submission
            
            // Collect form data
            let formData = {
                "client_details": {
                    "first_name": document.getElementById("firstName").value,
                    "last_name": document.getElementById("lastName").value,
                    "phone": document.getElementById("phone").value,
                    "email": document.getElementById("email").value
                },
                "job_details": {
                    "job_type": document.getElementById("jobType").value,
                    "job_source": document.getElementById("jobSource").value,
                    "job_description": document.getElementById("jobDescription").value
                },
                "service_location": {
                    "address": document.getElementById("address").value,
                    "city": document.getElementById("city").value,
                    "state": document.getElementById("state").value,
                    "zip_code": document.getElementById("zip").value,
                    "area": document.getElementById("area").value
                },
                "scheduled": {
                    "start_date": document.getElementById("startDate").value,
                    "start_time": document.getElementById("startTime").value,
                    "end_time": document.getElementById("endTime").value,
                    "test_select": document.getElementById("testSelect").value
                }
            };
            
            // Make API call to Pipedrive
            // Replace 'YOUR_API_KEY' and other placeholders with actual values
            fetch('526fa86e0acb9c31576101669ce6b11bf7fce233', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                alert("Deal created successfully!");
                // Optionally, redirect the user or perform any other action
            })
            .catch((error) => {
                console.error('Error:', error);
                alert("An error occurred. Please try again.");
            });
        });
    </script>
</body>
</html>
